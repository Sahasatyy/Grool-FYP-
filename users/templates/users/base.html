<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <!-- Font awesome icons -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
      integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay"
      crossorigin="anonymous"
    />

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </head>
  <style>
  
  </style>

  {% if messages %}
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            {% for message in messages %}
                Swal.fire({
                    icon: "{% if message.tags == 'success' %}success{% elif message.tags == 'error' or message.tags == 'danger' %}error{% elif message.tags == 'warning' %}warning{% elif message.tags == 'info' %}info{% endif %}",
                    title: "{% if message.tags == 'success' %}Success!{% elif message.tags == 'error' or message.tags == 'danger' %}Error!{% elif message.tags == 'warning' %}Warning!{% elif message.tags == 'info' %}Info{% endif %}",
                    text: "{{ message }}",
                    timer: 5000,
                    showConfirmButton: false
                });
            {% endfor %}
        });
    </script>
{% endif %}

  <body>
    <div class="container p-3 my-3">
      <div class="row">
        <div class="col-md-12">
          {% if not hide_navbar %}
          <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
            <div class="container-fluid">
              <!-- Left: Logo -->
              <a class="navbar-brand" href="#">Grool</a>
          
              <!-- Middle: Search Bar -->
              <form class="d-flex mx-auto" style="width: 40%">
                <input
                  class="form-control me-2"
                  type="search"
                  placeholder="Search songs, artists..."
                  aria-label="Search"
                />
              </form>
          
              <!-- Right: Profile & Logout -->
              <div class="navbar-nav ms-auto">
                {% if user.is_authenticated %}
                <a href="#" class="nav-item nav-link">Profile</a>
                <form id="logout-form" method="POST" action="{% url 'logout' %}">
                  {% csrf_token %}
                  <button type="submit" id="logout-btn" class="btn btn-danger">Logout</button>
              </form>
              {% else %}
              <a href="{% url 'login' %}" class="btn btn-primary">Sign In</a>
                {% endif %}
              </div>
            </div>
          </nav>
          {% endif %}
          
          <!-- Main content block -->
          {% block content %}{% endblock %}
        </div>
      </div>
    </div>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <!-- A plugin for password show/hide -->
    <script src="https://unpkg.com/bootstrap-show-password@1.2.1/dist/bootstrap-show-password.min.js"></script>

    <script>
      function confirmLogout(event) {
        event.preventDefault(); // Stop form submission
        let confirmAction = confirm("Are you sure you want to log out?");
    
        if (confirmAction) {
          event.target.submit(); // Submit the form if confirmed
        }
      }

    </script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("logout-btn").addEventListener("click", function (event) {
            event.preventDefault(); // Prevent form from submitting immediately
            
            Swal.fire({
                title: "Are you sure?",
                text: "You will be logged out!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#d33",
                cancelButtonColor: "#3085d6",
                confirmButtonText: "Yes, Logout!",
                cancelButtonText: "Cancel"
            }).then((result) => {
                if (result.isConfirmed) {
                    document.getElementById("logout-form").submit(); // Submit the form
                }
            });
        });
    });
  </script>

  </body>
</html>



